% !TEX program = xelatex
% !TEX encoding = UTF-8
\documentclass[a4paper]{article}

% % Greek font
% \usepackage[T2A,T1]{fontenc}
% \usepackage[utf8]{inputenc}
\usepackage[greek,english]{babel}

\usepackage{ctex}
\punctstyle{kaiming}
\setCJKmainfont[BoldFont=FZHei-B01, ItalicFont=FZKai-Z03
% FZNewKai-Z03
]{FZShuSong-Z01}
\setCJKfamilyfont{fangzhengkaiti}{FZKai-Z03}
\setmonofont{Consolas}

% % % uncomment these lines to enable Times New Roman font
% \usepackage{newtxtext}
% \usepackage{newtxmath}

\usepackage{multicol}
% Page Margin
\usepackage[% inner = 1in, outer = 1.5in % for my default book
    inner=1in,
    % outer=1.5in,
    outer=1in,
    bottom=1.5in,
]{geometry}

% Pronunciation
\usepackage{tipa}
\newcommand\yb[1]{\mbox{\upshape{\textipa{[#1]}}}}
\usepackage{ifxetex}
\ifxetex
  \usepackage{substitutefont}
  \substitutefont{T3}{\rmdefault}{cmr}
\fi
% https://tex.stackexchange.com/questions/464082/xelatex-font-shape-t3-lmr-m-n-undefinedfont-using-t3-cmr-m-n-insteadfont/464087
\usepackage{lmodern}
% https://tex.stackexchange.com/questions/58087/how-to-remove-the-warnings-font-shape-ot1-cmss-m-n-in-size-4-not-available
\usepackage{anyfontsize} % Font size will probably be problem

\usepackage{xcolor}
    \definecolor{gl}{RGB}{0,68,124} % 钢蓝, 短语/例句的颜色
    \definecolor{zs}{RGB}{174,13,22} % 棕色, 扩展的颜色

\usepackage{tcolorbox}
    \tcbuselibrary{breakable, skins} %使用它的 breakable
\usepackage{multicol}%分栏
    \setlength{\columnsep}{1cm}
\usepackage{imakeidx}
    \makeindex[title=单词表, options=-s zimu.ist]
    % \makeindex[name=prefix, title=前缀, options=-s zimu.ist]
    % \makeindex[name=suffix, title=后缀, options=-s zimu.ist]
    \makeindex[name=root, title=词根, options=-s zimu.ist]
    \makeindex[name=tubiao, title=补充内容]
    \indexsetup{noclearpage}
    \usepackage{idxlayout}
    \idxlayout{
        columns=5, rule=0.6pt, columnsep=10pt,
        font={small}
        } %索引分4栏
    \usepackage[hidelinks]{hyperref}

% % suffix and perfix
\newcommand\cg[1]{\textsf{#1}\index[root]{#1}}
% \newtcolorbox{qianzhuihezi}{%定义前缀盒子
%     colback=black!10,boxrule=0mm,colframe=black!10,
%     width=\linewidth, %宽度
%     boxsep=0mm, %文字和框的间距
%     left=3mm, %文字和左边框的间距
%     after skip=2mm,
%     before skip=5mm}
% \newcommand\zhui[2]{
%     \begin{qianzhuihezi}
%     \textbf{#1 #2}
%     \end{qianzhuihezi}}
%
% \newcommand\qz[2]{%前缀
%     \zhui{#1-\ \index[prefix]{#1}}{#2} \label{#1}}%
% \newcommand\qzz[3]{%俩前缀
%     \zhui{#1- = #2-\ \index[prefix]{#1}\index[prefix]{#2}}{#3} \label{#1} \label{#2}}%
% \newcommand\qzzz[4]{%仨前缀
%     \zhui{#1- = #2- = #3-\
%     \index[prefix]{#1}\index[prefix]{#2}\index[prefix]{#3}}{#4}
%     \label{#1}\label{#2}\label{#3}
%     }
% \newcommand\hz[2]{%后缀
%     \zhui{-#1\ \index[suffix]{#1}}{#2} \label{#1}}%
% \newcommand\hzz[3]{%俩后缀
%     \zhui{-#1 = -#2\ \index[suffix]{#1}\index[suffix]{#2}}{#3} \label{#1} \label{#2}}%
% \newcommand\hzzz[4]{%仨后缀
%     \zhui{-#1 = -#2 = -#3\
%     \index[suffix]{#1}\index[suffix]{#2}\index[suffix]{#3}}{#4}
%     \label{#1}\label{#2}\label{#3}}
% \renewcommand\r[2]{%词根
%     \zhui{#1\ \index[root]{#1}}{#2} \label{#1}}%
% \newcommand\rr[3]{%俩词根
%     \zhui{#1 = #2\ \index[root]{#1}\index[root]{#2}}{#3} \label{#1} \label{#2}}%
% \newcommand\rrr[4]{%仨词根
%     \zhui{#1 = #2 = #3\
%     \index[root]{#1}\index[root]{#2}\index[root]{#3}}{#4}
%     \label{#1}\label{#2}\label{#3}}

\renewcommand\c[1]{%单词
    \par\noindent
    \normalsize\normalfont
    \textbf{#1}\ \index{#1}\small}
\newcommand\cc[1]{
\c{#1}
}
% \newcommand\cc[1]{%二级单词
%     \par \setlength\parindent{5pt}%
%     \hangindent 20pt%
%     \normalsize\normalfont
%     \textbf{#1}\ \index{#1}\small}
\newcommand\p[1]{%phrase -> p % 短语
\par\noindent
\normalsize\normalfont
\textbf{#1}\ \small
}
\newcommand\dy[1]{\ \ {\color{gl}\slshape{#1}}}%短语

\usepackage{enumitem}
%\usepackage{amsmath} %input black square
\usepackage{setspace}
\newcommand\tbw[2]{%图表，里面是文字
    \vskip 2mm
    \begin{spacing}{1.2}
    \noindent \small
    \begin{tcolorbox}
      [colframe=white, coltext=zs, coltitle=zs,
      size=fbox,
      opacityback=0, opacitybacktitle=0, opacityframe=0,
      sharp corners=all,
      breakable, enhanced jigsaw,
      title={\rule{0.7em}{0.7em} \heiti\textbf{#1}\normalfont}]
          \CJKfamily{fzfs} #2
    \end{tcolorbox}
    \end{spacing}
    \index[tubiao]{#1}
    }
% \setlength{\leftmargin}{0mm} %左边界
% \setlength{\parsep}{0ex} %段落间距
% \setlength{\topsep}{1ex} %列表到上下文的垂直距离
% \setlength{\itemsep}{0mm} %条目间距
% \setlength{\labelsep}{0.3em} %标号和列表项之间的距离,默认0.5em
% \setlength{\itemindent}{0.2em} %标签缩进量
% \setlength{\listparindent}{0em} %段落缩进量
\newcommand\tb[2]{ %图表，里面是列表
    \tbw{#1}{
    \begin{enumerate}[leftmargin=*,itemsep=-2pt,topsep=0mm]
        #2
    \end{enumerate}
    }
    }

%fc-list -f "%{family}\n" :lang=zh > zhfont.txt
\setCJKfamilyfont{youyuan}{FZFangSong-Z02}%引入幼圆字体 YouYuan
\setCJKfamilyfont{fzfs}{FZFangSong-Z02} % 方正仿宋
\newcommand\jiakuang[1]{\CJKfamily{youyuan}\setlength{\fboxsep}{0.3mm}\fbox{\tiny#1\normalsize}\normalfont
}%加框
\newcommand\fk[1]{\jiakuang{#1}}%调用加框, 这一行实际可省略

\newcommand\fangkuangXiaozi[2]{
    % \begin{spacing}{1.0}
        % \vskip 1pt
        \par\noindent
        % \small
        \footnotesize
        \jiakuang{#1} \CJKfamily{fzfs} #2
        % \normalfont\normalsize
        % \vskip 2pt
    % \end{spacing}
}
\newcommand\zy[1]{\fangkuangXiaozi{注意}{#1}}
\newcommand\jf[1]{\fangkuangXiaozi{记法}{#1}}
% \newcommand\zt[1]{\fangkuangXiaozi{真题}{#1}}
% \newcommand\fwb[1]{\fangkuangXiaozi{笔记者注}{#1}}
\newcommand\fy[1]{\fangkuangXiaozi{翻译}{\normalfont\emph{#1}}}

%词性的格式
\newcommand\pos[1]{ {\itshape#1}.}
\renewcommand {\a}   {\pos{adj}}
\newcommand   {\ad}  {\pos{adv}}
\newcommand   {\n}   {\pos{n}}
\renewcommand {\v}   {\pos{v}}
\newcommand   {\vi}  {\pos{vi}}
\newcommand   {\vt}  {\pos{vt}}
\newcommand   {\vn}  {\pos{vn}}
\newcommand   {\nv}  {\pos{nv}}
\renewcommand {\int} {\pos{int}}
\newcommand   {\prep}{\pos{prep}}
\newcommand   {\pl}  {\pos{pl}}

% \tolerance=1 %下面几行是防止换行
% %\emergencystretch=\maxdimen
% \hyphenpenalty=10000
% \hbadness=10000
\usepackage[none]{hyphenat}

\renewcommand\sl{$\cdots$ }%省略
\newcommand\ty{$\sim$ }%同义词，后面不接任何东西，所以要有空格
\newcommand\tyc{$\sim$}%同义词，由于是词语，后面接 s、ed 等

% \usepackage{fancyhdr}
% \pagestyle{fancy}
% % \lhead{}
% % \chead{}
% % bfseries
% \chead{\fangsong\small 笔记排版 / 范文斌 (178-6567-1650)}
% % \lfoot{From: K. Grant}
% \cfoot{}
% \fancyfoot[LE,RO]{\thepage}
% \fancyfoot[LO,RE]{\fangsong\small 仅供参考学习，切勿挪作他用，版权归属新东方}
% \renewcommand{\headrulewidth}{0pt}

% \usepackage{draftwatermark}
% \SetWatermarkText{\textbf{仅供参考}}
% \SetWatermarkColor[gray]{0.98}

\newcounter{timu}%题目
\setcounter{timu}{1}
\newcommand\UnivYear{测试·年份}
\newcommand\setUY[1]{\renewcommand\UnivYear{#1}}
\newcommand\ti[1]{
    \normalfont\normalsize
    \begin{tcolorbox}[%
        colback=black!3!white, colframe=black!3!white,
        size=title,
        boxrule=1pt, before skip=8pt, after skip=5pt,
        breakable,
        enhanced jigsaw]
    \textsf{\textbf{\arabic{timu}.}} (\fangsong\UnivYear\normalfont) #1
    \end{tcolorbox}\stepcounter{timu}
}
\newcommand\hh{\underline{\hbox to 10mm{}} }

% new page with each section
\usepackage{titlesec}
\newcommand{\sectionbreak}{\clearpage}

\usepackage{ifthen}
\usepackage{array}
\newcommand\abcdsty[1]{#1.} % style of ABCD label
\newcommand{\fourch}[4]{%~\hfill(\qquad)\\
\begin{tabular}{*{4}{@{}p{0.25\textwidth}}}\abcdsty{A}~#1 & \abcdsty{B}~#2 & \abcdsty{C}~#3 & \abcdsty{D}~#4\end{tabular}}
\newcommand{\twoch}[4]{%~\hfill(\qquad)\\
\begin{tabular}{*{2}{@{}p{0.5\textwidth}}}\abcdsty{A}~#1 & \abcdsty{B}~#2\end{tabular}\\\begin{tabular}{*{2}{@{}p{0.5\textwidth}}}\abcdsty{C}~#3 & \abcdsty{D}~#4\end{tabular}}
\newcommand{\onech}[4]{%~\hfill(\qquad)\\
\abcdsty{A}~#1 \\ \abcdsty{B}~#2 \\ \abcdsty{C}~#3 \\ \abcdsty{D}~#4}

\newlength\widthcha
\newlength\widthchb
\newlength\widthchc
\newlength\widthchd
\newlength\widthch
\newlength\tabmaxwidth
\newlength\fourthtabwidth
\newlength\halftabwidth

\newcommand{\choice}[4]{\\
    \setlength\tabmaxwidth{1\textwidth}
    \setlength\fourthtabwidth{0.25\textwidth}
    \setlength\halftabwidth{0.5\textwidth}
    \settowidth\widthcha{AM.#1}
    \setlength{\widthch}{\widthcha}
    \settowidth\widthchb{BM.#2}
    \ifthenelse{\widthch<\widthchb}{\setlength{\widthch}{\widthchb}}{}
    \settowidth\widthchb{CM.#3}
    \ifthenelse{\widthch<\widthchb}{\setlength{\widthch}{\widthchb}}{}
    \settowidth\widthchb{DM.#4}
    \ifthenelse{\widthch<\widthchb}{\setlength{\widthch}{\widthchb}}{}
    \ifthenelse{\widthch<\fourthtabwidth}{\fourch{#1}{#2}{#3}{#4}}
    {\ifthenelse{\widthch<\halftabwidth\and\widthch>\fourthtabwidth}
    {\twoch{#1}{#2}{#3}{#4}}
    {\onech{#1}{#2}{#3}{#4}}}
}

% path of include or input
\makeatletter
\providecommand*\input@path{}
\newcommand\addinputpath[1]{
\expandafter\def\expandafter\input@path
\expandafter{\input@path{#1}}}
\addinputpath{section/}
\makeatother

% chn-eng parallel
\newcounter{YHCounter} % ying han counter -> YHCounter
\usepackage{parallel}
\newcommand\dz[1]{ % duizhao -> dz
\setcounter{YHCounter}{1}
\begin{Parallel}{0.38\textwidth}{0.58\textwidth}
#1
\end{Parallel}
}
\newcommand\yh[2]{
\ParallelPar
\ParallelLText{\noindent\textsf{{\arabic{YHCounter}.}} #1}
\ParallelRText{\noindent\textsf{{\arabic{YHCounter}.}} #2}
\stepcounter{YHCounter}
}

\begin{document}
% \begin{titlepage}
% \hfill
% {\centering\huge\heiti
% 新东方托福核心词汇
% \normalfont\normalsize
% \\
% \kaiti\large
% 主讲 /
% \\
% 笔记排版 / 范文斌 (178-6567-1650)}
% \vspace{3cm}\normalfont\normalsize
% \end{titlepage}
\tableofcontents

% \chapter{真题}
\input{RUC2001}
\input{RUC2009}
\input{QS} % 求是英语培训
\input{FDU2009}
\input{FDU2010}

\printindex
% \printindex[prefix]
% \printindex[suffix]
\printindex[root]
% \printindex[tubiao]
\end{document}
